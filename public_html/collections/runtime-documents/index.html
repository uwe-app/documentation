<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><title>Runtime Documents</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="content-security-policy" content="default-src data: &#x27;self&#x27;; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Using data documents at runtime"><meta name="commit" content="558a1f54cf10c1b6cfc668201951b9c3c8a81d43"><meta name="generator" content="uwe/0.43.5"><meta name="version" content="1.0.0"><meta name="author" content="Muji (https://tmpfs.org/)"><meta property="og:description" content="Using data documents at runtime"><meta property="og:image" content="https://uwe.app/assets/img/social.jpg"><meta property="og:site_name" content="UWE / Universal Web Editor"><meta property="og:title" content="Runtime Documents"><meta property="og:type" content="website"><meta property="og:url" content="https://uwe.app/docs/collections/runtime-documents/"><link rel="stylesheet" href="../../../assets/plugins/font::inter::regular/plugins/regular/styles/fonts.css"><link rel="stylesheet" href="../../../assets/plugins/std::core/styles/standard.css"><link rel="stylesheet" href="../../../assets/plugins/std::crumbtrail/styles/crumbtrail.css"><link rel="stylesheet" href="../../../assets/plugins/std::menu/styles/menu.css"><link rel="stylesheet" href="../../../assets/plugins/std::note/styles/note.css"><link rel="stylesheet" href="../../../assets/plugins/std::sidebar/styles/sidebar.css"><link rel="icon" href="data:image/gif;base64,R0lGODlhEAAQAAAAACwAAAAAAQABAAACASgAOw=="><link rel="stylesheet" href="../../../assets/styles/main.css"><link rel="manifest" href="../../../app.webmanifest"><link rel="canonical" href="https://uwe.app/docs/collections/runtime-documents/"></head><body><input id="sidebar-toggle" type="checkbox"><aside id="sidebar"><header><a href="../../" title="Home">Home</a><label for="sidebar-toggle"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></label></header><nav><p><a href="../../installation/" title="Installation">Installation</a></p><ul><li><a href="../../installation/quick-install/" title="Quick Install">Quick Install</a></li><li><a href="../../installation/release-strategy/" title="Release Strategy">Release Strategy</a></li><li><a href="../../installation/upgrade/" title="Upgrade">Upgrade</a></li><li><a href="../../installation/project-versioning/" title="Project Versioning">Project Versioning</a></li><li><a href="../../installation/offline-documentation/" title="Offline Documentation">Offline Documentation</a></li><li><a href="../../installation/clean-install/" title="Clean Install">Clean Install</a></li><li><a href="../../installation/uninstall/" title="Uninstall">Uninstall</a></li></ul></nav><nav><p><a href="../../getting-started/" title="Getting Started">Getting Started</a></p><ul><li><a href="../../getting-started/new-project/" title="New Project">New Project</a></li><li><a href="../../getting-started/build-project/" title="Build Project">Build Project</a></li><li><a href="../../getting-started/site-settings/" title="Site Settings">Site Settings</a></li><li><a href="../../getting-started/live-reload/" title="Live Reload">Live Reload</a></li><li><a href="../../getting-started/adding-pages/" title="Adding Pages">Adding Pages</a></li><li><a href="../../getting-started/front-matter/" title="Front Matter">Front Matter</a></li><li><a href="../../getting-started/links/" title="Links">Links</a></li><li><a href="../../getting-started/content/" title="Content">Content</a></li><li><a href="../../getting-started/styles/" title="Styles">Styles</a></li><li><a href="../../getting-started/scripts/" title="Scripts">Scripts</a></li><li><a href="../../getting-started/layouts/" title="Layouts">Layouts</a></li><li><a href="../../getting-started/integrations/" title="Integrations">Integrations</a></li><li><a href="../../getting-started/web-manifest/" title="Web Manifest">Web Manifest</a></li><li><a href="../../getting-started/debugging/" title="Debugging">Debugging</a></li><li><a href="../../getting-started/conventions/" title="Conventions">Conventions</a></li><li><a href="../../getting-started/directory-listing/" title="Directory Listing">Directory Listing</a></li><li><a href="../../getting-started/publish/" title="Publish">Publish</a></li><li><a href="../../getting-started/powered-by/" title="Powered By">Powered By</a></li></ul></nav><nav><p><a href="../../navigation/" title="Navigation">Navigation</a></p><ul><li><a href="../../navigation/defining-menus/" title="Defining Menus">Defining Menus</a></li><li><a href="../../navigation/rendering-menus/" title="Rendering Menus">Rendering Menus</a></li><li><a href="../../navigation/next-previous/" title="Next / Previous Links">Next / Previous Links</a></li></ul></nav><nav><p><a href="../../pages/" title="Pages">Pages</a></p><ul><li><a href="../../pages/combining-pages/" title="Combining Pages">Combining Pages</a></li><li><a href="../../pages/removing-pages/" title="Removing Pages">Removing Pages</a></li><li><a href="../../pages/drafts/" title="Drafts">Drafts</a></li><li><a href="../../pages/redirects/" title="Redirects">Redirects</a></li><li><a href="../../pages/clean-urls/" title="Clean URLs">Clean URLs</a></li><li><a href="../../pages/trailing-slash/" title="Trailing Slash">Trailing Slash</a></li></ul></nav><nav><p><a href="../../content/" title="Content">Content</a></p><ul><li><a href="../../content/author-attribution/" title="Author Attribution">Author Attribution</a></li><li><a href="../../content/reading-time/" title="Reading Time">Reading Time</a></li><li><a href="../../content/feeds/" title="Feeds">Feeds</a></li><li><a href="../../content/syntax-highlight/" title="Syntax Highlight">Syntax Highlight</a></li><li><a href="../../content/edit-on-github/" title="Edit On Github">Edit On Github</a></li></ul></nav><nav><p><a href="../../plugins/" title="Plugins">Plugins</a></p><ul><li><a href="../../plugins/dependencies/" title="Dependencies">Dependencies</a></li><li><a href="../../plugins/apply/" title="Apply">Apply</a></li><li><a href="../../plugins/using-templates/" title="Using Templates">Using Templates</a></li></ul></nav><nav><p><a href="../../design-patterns/" title="Design Patterns">Design Patterns</a></p><ul><li><a href="../../design-patterns/sidebar/" title="Sidebar Menu">Sidebar Menu</a></li><li><a href="../../design-patterns/crumbtrails/" title="Crumbtrails">Crumbtrails</a></li><li><a href="../../design-patterns/table-of-contents/" title="Table Of Contents">Table Of Contents</a></li><li><a href="../../design-patterns/sticky-header/" title="Sticky Header">Sticky Header</a></li><li><a href="../../design-patterns/notes/" title="Notes">Notes</a></li></ul></nav><nav><p><a href="../../search-engines/" title="Search Engines">Search Engines</a></p><ul><li><a href="../../search-engines/no-index/" title="No Index">No Index</a></li><li><a href="../../search-engines/robots/" title="Robots">Robots</a></li><li><a href="../../search-engines/site-maps/" title="Site Maps">Site Maps</a></li></ul></nav><nav><p><a href="../../translate/" title="Translate">Translate</a></p><ul><li><a href="../../translate/introduction/" title="Introduction">Introduction</a></li><li><a href="../../translate/languages/" title="Languages">Languages</a></li><li><a href="../../translate/messages/" title="Messages">Messages</a></li><li><a href="../../translate/pages/" title="Pages">Pages</a></li></ul></nav><nav><p><a href="../../publish/" title="Publish">Publish</a></p><ul><li><a href="../../publish/self-hosting/" title="Self Hosting">Self Hosting</a></li><li><a href="../../publish/amazon-web-services/" title="Amazon Web Services">Amazon Web Services</a></li></ul></nav><nav><p><a href="../../other/" title="Other Topics">Other Topics</a></p><ul><li><a href="../../other/workspaces/" title="Workspaces">Workspaces</a></li><li><a href="../../other/profiles/" title="Profiles">Profiles</a></li><li><a href="../../other/hooks/" title="Hooks">Hooks</a></li><li><a href="../../other/content-security-policy/" title="Content Security Policy">Content Security Policy</a></li><li><a href="../../other/json-templates/" title="JSON Templates">JSON Templates</a></li><li><a href="../../other/link-catalog/" title="Link Catalog">Link Catalog</a></li><li><a href="../../other/ignores/" title="Ignores">Ignores</a></li><li><a href="../../other/error-page/" title="Error Page">Error Page</a></li><li><a href="../../other/strict-mode/" title="Strict Mode">Strict Mode</a></li><li><a href="../../other/parallel-builds/" title="Parallel Builds">Parallel Builds</a></li><li><a href="../../other/ssl-certificates/" title="SSL Certificates">SSL Certificates</a></li></ul></nav><nav><p><a href="../../reference/" title="Reference">Reference</a></p><ul><li><a href="../../reference/helpers/" title="Helpers">Helpers</a></li><li><a href="../../reference/settings/" title="Settings">Settings</a></li><li><a href="../../reference/commands/" title="Commands">Commands</a></li></ul></nav></aside><main><header><a href="../../" title="Home">UWE</a><label for="sidebar-toggle"><span>Menu</span>&nbsp;<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></label></header><article><h1 id="runtime-documents">Runtime Documents</h1><nav class="crumbtrail"><a href="../../../" title="Universal Web Editor">Home</a><a href="../../" title="Documentation and developer reference">Documentation</a><a href="../" title="Create pages from data sources">Collections</a>Runtime Documents</nav><p>To progressively enhance a website you may want runtime access to the JSON documents defined for a generator.</p><p>This is achieved by rendering JSON files as templates which gives them full access to all the generator indices and is much more versatile than just copying over the generator documents.</p><h3 id="settings">Settings</h3><p>First, we should update the <a href="../../reference/settings/" title="Settings">settings</a> to render <code>json</code> files as templates; in the <code>site.toml</code> settings add the configuration:</p><pre><code><span style="color:#657b83;">[</span><span style="color:#b58900;">extension</span><span style="color:#657b83;">]
</span><span style="color:#268bd2;">render </span><span style="color:#657b83;">= [</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">md</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">html</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">json</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">]
</span><span style="color:#268bd2;">map </span><span style="color:#657b83;">= {</span><span style="color:#268bd2;">md </span><span style="color:#657b83;">= </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">html</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">}
</span><span style="color:#268bd2;">markdown </span><span style="color:#657b83;">= [</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">md</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">]
</span></code></pre><p>Now our files with a <code>json</code> extension in the <code>site</code> directory will be rendered as templates.</p><h3 id="template">Template</h3><p>Create the file <code>site/quotes/item.json</code> to be the document template:</p><pre><code><span style="color:#657b83;">{{</span><span style="color:#cb4b16;">#</span><span style="color:#859900;">with </span><span style="color:#268bd2;">value</span><span style="color:#657b83;">}}{{</span><span style="color:#b58900;">json </span><span style="color:#268bd2;">document </span><span style="color:#b58900;">true</span><span style="color:#657b83;">}}{{</span><span style="color:#cb4b16;">/</span><span style="color:#859900;">with</span><span style="color:#657b83;">}}
</span></code></pre><blockquote><p>Notice that we pass a second boolean parameter to the <code>json</code> helper for compact output.</p></blockquote><p>To expose the data to the template we add a query to <code>site/page.toml</code>:</p><pre><code><span style="color:#657b83;">[</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">quotes/item.json</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">]
</span><span style="color:#268bd2;">clean </span><span style="color:#657b83;">= </span><span style="color:#b58900;">false
</span><span style="color:#268bd2;">standalone </span><span style="color:#657b83;">= </span><span style="color:#b58900;">true
</span><span style="color:#268bd2;">query </span><span style="color:#657b83;">= {</span><span style="color:#268bd2;">name </span><span style="color:#657b83;">= </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">quotes</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#268bd2;">index </span><span style="color:#657b83;">= </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">all</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#268bd2;">each </span><span style="color:#657b83;">= </span><span style="color:#b58900;">true</span><span style="color:#657b83;">, </span><span style="color:#268bd2;">include_docs </span><span style="color:#657b83;">= </span><span style="color:#b58900;">true</span><span style="color:#657b83;">}
</span></code></pre><p>Let's unpack this a little. First we disable <code>clean</code> locations so that our files will be placed in <code>quotes</code> such that we end up with an output destination like <code>quotes/empty-your-mind.json</code>; then we enable the <code>standalone</code> flag so no layout is applied to the template.</p><p>The <code>query</code> is configured to iterate all documents (<code>each</code>) in the <code>all</code> index of the <code>quotes</code> generator and include the documents referenced by the index (<code>include_docs</code>).</p><p>A build using this configuration copies all the files in the <code>generator/quotes/documents</code> directory to the build output directory <code>build/debug/quotes</code> and converts the JSON to a compact format.</p><h3 id="index-file">Index File</h3><p>To access these documents efficiently in our client-side Javascript we might like an index of all the documents created; to do this we can create the file <code>site/quotes/index.json</code>:</p><pre><code><span style="color:#657b83;">{{</span><span style="color:#b58900;">json </span><span style="color:#268bd2;">documents </span><span style="color:#b58900;">true</span><span style="color:#657b83;">}}
</span></code></pre><p>And configure it in <code>site/page.toml</code> to pass the index keys:</p><pre><code><span style="color:#657b83;">[</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">quotes/index.json</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">]
</span><span style="color:#268bd2;">clean </span><span style="color:#657b83;">= </span><span style="color:#b58900;">false
</span><span style="color:#268bd2;">standalone </span><span style="color:#657b83;">= </span><span style="color:#b58900;">true
</span><span style="color:#268bd2;">query </span><span style="color:#657b83;">= {</span><span style="color:#268bd2;">name </span><span style="color:#657b83;">= </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">quotes</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#268bd2;">index </span><span style="color:#657b83;">= </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">all</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">, </span><span style="color:#268bd2;">keys </span><span style="color:#657b83;">= </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">name</span><span style="color:#839496;">&quot;</span><span style="color:#657b83;">}
</span></code></pre><p>Which yields the file <code>quotes/index.json</code> with an array of the key names; for example:</p><pre><code><span style="color:#657b83;">[ </span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">empty-your-mind</span><span style="color:#839496;">&quot; </span><span style="color:#657b83;">]
</span></code></pre><p>Now you can write the Javascript to leverage <code>fetch()</code> to enhance your site!</p><p><a href=".." title="Collections">Back to Collections</a></p></article><footer><div><p>Last updated Mon Dec  7 2020</p><p><a href="https://uwe.app" title="Made by Universal Web Editor" style="text-decoration: none; font-size: 12px;">MADE BY UWE</a></p></div></footer></main><script src="../../../assets/plugins/std::sidebar/scripts/sidebar.js"></script><noscript>For a better experience please enable Javascript</noscript></body></html>